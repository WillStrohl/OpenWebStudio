{"Name":"XMLQuery.Example.SiteUrls","recordsPerPage":"0","enableAlphaFilter":"false","enablePageSelection":"false","enableRecordsPerPage":"false","enableCustomPaging":"false","enableExcelExport":false,"enableHide_OnNoQuery":false,"enableHide_OnNoResults":false,"enableAdvancedParsing":true,"enableCompoundIIFConditions":"true","enableQueryDebug":"false","enableQueryDebug_Edit":"false","enableQueryDebug_Admin":"false","enableQueryDebug_Super":"false","enableQueryDebug_Log":false,"enableQueryDebug_ErrorLog":false,"autoRefreshInterval":"","skipRedirectActions":"false","skipSubqueryDebugging":"false","enableAdmin_Edit":true,"enableAdmin_Admin":false,"enableAdmin_Super":false,"enableAJAX":"false","enableAJAXCustomPaging":"false","enableAJAXCustomStatus":"false","enableAJAXManual":"false","includeJavascriptUtilities":"false","includeJavascriptValidation":"false","javascriptOnComplete":"","enableMultipleColumnSorting":"false","ModuleCommunicationMessageType":"","showAll":"true","useExplicitSystemVariables":"false","enabledForcedQuerySplit":"false","searchItems":[],"queryItems":[],"listItems":[],"messageItems":[{"Index":1,"Level":0,"Parameters":{"Name":"OnLoad","RenderType":"0","skipDebug":"False","includeSearch":"False","includeExport":"False","includeImport":"False"},"ActionType":"Action-Region","ChildActions":[{"Index":2,"Level":1,"Parameters":{"Value":"Create the Table we need - if it is not present already"},"ActionType":"Action-Comment","ChildActions":[]},{"Index":3,"Level":0,"Parameters":{"Name":"CREATE_TABLE","Query":"if not exists(select top 1 * from sysobjects where xtype='U' and name='OWS_SiteUrls')\nBegin\n\tCREATE TABLE OWS_SiteUrls(ID int identity(1,1),LookFor varchar(500),SendTo varchar(500))\nEND","IsProcess":"false","Connection":"","CacheName":"","CacheTime":"","CacheShared":"false"},"ActionType":"Action-Execute","ChildActions":[]},{"Index":4,"Level":1,"Parameters":{"Value":"Truncate the table"},"ActionType":"Action-Comment","ChildActions":[]},{"Index":5,"Level":0,"Parameters":{"Name":"TRUNCATE_TABLE","Query":"Truncate Table OWS_SiteUrls","IsProcess":"false","Connection":"","CacheName":"","CacheTime":"","CacheShared":"false"},"ActionType":"Action-Execute","ChildActions":[]},{"Index":6,"Level":1,"Parameters":{"Value":"Loop through the Siteurls.config entries, populating the table. This is a scratch space to identify new records which should be added."},"ActionType":"Action-Comment","ChildActions":[]},{"Index":7,"Level":0,"Parameters":{"Name":"SITEURLS","Query":"<XML>\n                <PATH>~/SiteURLs.config</PATH>\n                <NAMESPACES>\n               \t\t <NAMESPACE>\n                            <URI>http://www.w3.org/2001/XMLSchema</URI>\n                            <PREFIX>xsd</PREFIX>\n                        </NAMESPACE>\n                \t<NAMESPACE>\n                           <URI>http://www.w3.org/2001/XMLSchema-Instance</URI>\n                           <PREFIX>xsi</PREFIX>\n                        </NAMESPACE>\n                </NAMESPACES>\n                <ROWS>/RewriterConfig/Rules/RewriterRule</ROWS>\n                <COLUMNS>\n                \t<COLUMN>\n                                <NAME>LookFor</NAME>\n                                <XPATH>LookFor</XPATH>\n                        </COLUMN>\n                \t<COLUMN>\n                        \t<NAME>SendTo</NAME>\n                        \t<XPATH>SendTo</XPATH>\n                        </COLUMN>\n                 </COLUMNS>\n</XML>","IsProcess":"false","Connection":"","CacheName":"","CacheTime":"","CacheShared":"false"},"ActionType":"Action-Execute","ChildActions":[{"Index":8,"Level":0,"Parameters":{"VariableType":"<Custom>","VariableDataType":"Any","Formatters":"","QuerySource":"[|LookFor,SITEURLS]","QueryTarget":"@lookfor","QueryTargetLeft":"'","QueryTargetRight":"'","QueryTargetEmpty":"NULL","EscapeListX":"0","Protected":"true","EscapeHTML":"true"},"ActionType":"Template-Variable","ChildActions":[]},{"Index":9,"Level":0,"Parameters":{"VariableType":"<Custom>","VariableDataType":"Any","Formatters":"","QuerySource":"[|SendTo,SITEURLS]","QueryTarget":"@sendto","QueryTargetLeft":"'","QueryTargetRight":"'","QueryTargetEmpty":"NULL","EscapeListX":"0","Protected":"true","EscapeHTML":"true"},"ActionType":"Template-Variable","ChildActions":[]},{"Index":10,"Level":0,"Parameters":{"Name":"INSERT","Query":"INSERT INTO OWS_Siteurls(LookFor,SendTo) values (@lookfor,@sendto)","IsProcess":"false","Connection":"","CacheName":"","CacheTime":"","CacheShared":"false"},"ActionType":"Action-Execute","ChildActions":[]}]},{"Index":11,"Level":1,"Parameters":{"Value":"Loop through your records which you should be adding - in this case I hard coded the query"},"ActionType":"Action-Comment","ChildActions":[]},{"Index":12,"Level":0,"Parameters":{"Name":"NEWURLS","Query":"Select '.*/ContentExample1/(.*).aspx' LookFor, '~/default.aspx?TabId=35&topic=$1' SendTo\nUNION\nSelect '.*/ContentExample2/(.*).aspx' LookFor, '~/default.aspx?TabId=36&topic=$1' SendTo\n","IsProcess":"false","Connection":"","CacheName":"","CacheTime":"","CacheShared":"false"},"ActionType":"Action-Execute","ChildActions":[{"Index":13,"Level":0,"Parameters":{"VariableType":"<Custom>","VariableDataType":"Any","Formatters":"","QuerySource":"[|LookFor,NEWURLS]","QueryTarget":"@lookfor","QueryTargetLeft":"'","QueryTargetRight":"'","QueryTargetEmpty":"NULL","EscapeListX":"0","Protected":"false","EscapeHTML":"false"},"ActionType":"Template-Variable","ChildActions":[]},{"Index":14,"Level":0,"Parameters":{"VariableType":"<Custom>","VariableDataType":"Any","Formatters":"","QuerySource":"[|SendTo,NEWURLS]","QueryTarget":"@sendto","QueryTargetLeft":"'","QueryTargetRight":"'","QueryTargetEmpty":"NULL","EscapeListX":"0","Protected":"false","EscapeHTML":"false"},"ActionType":"Template-Variable","ChildActions":[]},{"Index":15,"Level":0,"Parameters":{"Name":"CHECK","Query":"If not exists(select top 1 LookFor from OWS_SiteUrls where LookFor=@lookfor)\nBEGIN\n\tINSERT INTO OWS_SiteUrls(lookfor,sendto) values (@lookfor,@sendto)\nEND","IsProcess":"false","Connection":"","CacheName":"","CacheTime":"","CacheShared":"false"},"ActionType":"Action-Execute","ChildActions":[]}]},{"Index":16,"Level":0,"Parameters":{"Value":"OWS_SiteUrls table contains everything we need now, generate the new file!"},"ActionType":"Action-Comment","ChildActions":[]},{"Index":17,"Level":0,"Parameters":{"Type":"&lt;Action&gt;","Name":"SiteUrls_Config","Value":"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<RewriterConfig xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\">\n  <Rules>\n","SkipProcessing":"true","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]},{"Index":18,"Level":0,"Parameters":{"Name":"SITEURLS","Query":"select * from OWS_SiteUrls","IsProcess":"false","Connection":"","CacheName":"","CacheTime":"","CacheShared":"false"},"ActionType":"Action-Execute","ChildActions":[{"Index":19,"Level":0,"Parameters":{"Type":"&lt;Action&gt;","Name":"SiteUrls_Config","Value":"    <RewriterRule>\n      <LookFor>[|lookfor,SITEURLS]</LookFor>\n      <SendTo>[|sendto,SITEURLS]</SendTo>\n    </RewriterRule>\n","SkipProcessing":"false","AssignmentType":"1"},"ActionType":"Action-Assignment","ChildActions":[]}]},{"Index":20,"Level":0,"Parameters":{"Type":"&lt;Action&gt;","Name":"SiteUrls_Config","Value":"  </Rules>\n</RewriterConfig>","SkipProcessing":"true","AssignmentType":"1"},"ActionType":"Action-Assignment","ChildActions":[]},{"Index":21,"Level":0,"Parameters":{"Value":"File is ready for storage, I am saving it currently as a different filename"},"ActionType":"Action-Comment","ChildActions":[]},{"Index":22,"Level":0,"Parameters":{"SourceType":"Variable","SourceVariableType":"&lt;Action&gt;","Source":"SiteUrls_Config","SourceQuery":"","SourceConnection":"","DestinationType":"Path","DestinationVariableType":"","DestinationResponseType":"","SQLFirstRow":"false","ColumnMappings":"","DestinationQuery":"","RunAsProcess":"false","ProcessName":"","Destination":"~/SiteUrls.new.config","TransformType":"","ImageTransformType":"","ImageFont":"","ImageSize":"","ImageSizeType":"","ImageColor":"","ImageBGColor":"","ImageWidth":"","ImageWidthType":"px","ImageHeight":"","ImageHeightType":"px","ImageQuality":"90","XMLReadPath":"","XMLWritePath":"","FileTask":"","ImageWarp":"","ImageText":"","ImageX":"0","ImageY":"0"},"ActionType":"Action-File","ChildActions":[]},{"Index":23,"Level":0,"Parameters":{"Type":"Query-Query","GroupStatement":"","GroupIndex":"","Value":"Select * from OWS_SiteUrls","Connection":"","Filter":"","CacheTime":"","CacheName":"","CacheShared":"false"},"ActionType":"Template","ChildActions":[]},{"Index":24,"Level":0,"Parameters":{"Type":"Detail-Detail","GroupStatement":"","GroupIndex":"","Value":"<li>[LookFor] -&gt;[SendTo]</li>","Connection":"","Filter":"","CacheTime":"","CacheName":"","CacheShared":"false"},"ActionType":"Template","ChildActions":[]}]}],"query":"","filter":"","customConnection":"","listItem":"","listAItem":"","defaultItem":"","noqueryItem":"","SearchQuery":"","SearchTitle":"","SearchLink":"","SearchAuthor":"","SearchDate":"","SearchKey":"","SearchContent":"","SearchDescription":"","Version":"20","enableAJAXPaging":"false","enableAJAXPageHistory":"false","customAJAXPageHistory":"","disableOpenScript":false,"enableSilverlight":false,"javascriptInclude":[],"ConfigurationID":"12961399-4993-4C6F-59A3-0E5C012C21FC"}